!function(i){function t(t,n){function e(){return i(window).innerWidth()}function a(i){return{left:r.radius+(r.radius-r.correctRadius)*Math.cos(r.MATH_PI*(1-i)/r.visibleCount),top:r.radius+(r.radius-r.correctRadius)*Math.sin(r.MATH_PI*(1-i)/r.visibleCount)}}function s(i){return{left:r.radiusSubItem+(r.radiusSubItem-r.correctRadiusSubItem)*Math.cos(r.MATH_PI*(1-i)/r.visibleSubCount),top:r.radiusSubItem+(r.radiusSubItem-r.correctRadiusSubItem)*Math.sin(r.MATH_PI*(1-i)/r.visibleSubCount)}}function o(i,t,e,o){if(!0!==o){u=a(i);t.animate({left:u.left-r.correctPosition/2+"px",top:u.top-r.correctPosition/2+"px"},n.duration),setTimeout(function(){t.removeClass("mx-visible"),e>0&&e<=r.visibleCount&&t.addClass("mx-visible")},n.duration)}else{var u=s(i);t.animate({left:u.left-r.subCorrectPosition/2+"px",top:u.top-r.subCorrectPosition/2+"px"},n.duration),setTimeout(function(){t.removeClass("mx-visible"),e>0&&e<=r.visibleSubCount&&t.addClass("mx-visible")},n.duration)}t.find("ul").removeClass("mx-sub_navigation_visible"),setTimeout(function(){r.keyMotion=!0},n.duration)}function u(i,t,e,o){if(!0!==o){t.removeClass("mx-visible"),e>0&&e<=r.visibleCount&&t.addClass("mx-visible");u=a(i);t.animate({left:u.left-r.correctPosition/2+"px",top:u.top-r.correctPosition/2+"px"},n.duration)}else{t.removeClass("mx-visible"),e>0&&e<=r.visibleSubCount&&t.addClass("mx-visible");var u=s(i);t.animate({left:u.left-r.subCorrectPosition/2+"px",top:u.top-r.subCorrectPosition/2+"px"},n.duration)}t.find("ul").removeClass("mx-sub_navigation_visible"),setTimeout(function(){r.keyMotion=!0},n.duration)}function l(i,t){i.is(t.target)||0!==i.has(t.target).length||i.find("ul").removeClass("mx-sub_navigation_visible")}var r={menuMainItemIdBegin:1,visibleCount:n.visibleElementsMainMenu+1,radius:200,correctRadius:50,correctPosition:0,MATH_PI:2*Math.PI,subCorrectPosition:0,visibleSubCount:n.visibleElementsSubMenu+1,radiusSubItem:150,correctRadiusSubItem:55,keyMotion:!0};({getWidthWindow:function(){e()<=500&&(r.radius=150,r.radiusSubItem=130)},addClassForMenu:function(){t.addClass("mx-navigation")},createButtonOpenMenu:function(){!1===n.menuFixed&&t.before('<button id="mxOpenMenu"><span></span><span></span><span></span></button>')},createWrapForMenu:function(){t.wrap('<div class="mx-navigation_wrap"></div>')},createMenu:function(){var n=this;t.children("li").each(function(){r.correctPosition=i(this).width(),i(this).attr("id",r.menuMainItemIdBegin),i(this).attr("data-angle",r.menuMainItemIdBegin),r.menuMainItemIdBegin<=r.visibleCount&&i(this).addClass("mx-visible");var t=a(r.menuMainItemIdBegin);i(this).css({left:t.left-r.correctPosition/2+"px",top:t.top-r.correctPosition/2+"px"}),r.menuMainItemIdBegin++}),t.children("li").length>r.visibleCount&&n.addButtonsNav(t),t.find("li").each(function(){i(this).children("ul").length>0&&n.createSubMenu(i(this))})},createSubMenu:function(t){t.children("a").addClass("mx-is_sub_menu_link"),t.append('<span class="mx-is_a_child"></span>'),t.children("ul").addClass("mx-sub_navigation"),t.children("a").attr("onclick","return false");var n=1;t.children("ul").children("li").each(function(){r.subCorrectPosition=i(this).width(),i(this).attr("data-angle",n),n<=r.visibleSubCount&&i(this).addClass("mx-visible");var t=s(n);i(this).css({left:t.left-r.subCorrectPosition/2+"px",top:t.top-r.subCorrectPosition/2+"px"}),n++}),t.children("ul").children("li").length>r.visibleSubCount&&this.addButtonsNav(t.children("ul"))},addButtonsNav:function(i){i.append('<div class="buttonsNavWrap"></div>'),i.children(".buttonsNavWrap").append('<button class="nextSpace">Next</button>'),i.children(".buttonsNavWrap").append('<button class="prevSpace">Prev</button>')},fixedMenu:function(){i(".mx-navigation_wrap").css("top","0px")},addOptions:function(){!1===n.menuFixed&&t.css("top","-2000px"),!1===n.menuFixed?t.before('<span class="mx-close"></span>'):this.fixedMenu(),!0===n.circleFromBehind&&(t.before('<span class="mx-back_circle1"></span>'),t.before('<span class="mx-back_circle2"></span>')),!0===n.livingElements&&t.find("li").addClass("mx-animation_flicker"),!0===n.liveItemsHover&&t.find("li").addClass("mx-live_items_hover")},init:function(){this.getWidthWindow(),this.addClassForMenu(),this.createButtonOpenMenu(),this.createWrapForMenu(),this.createMenu(),this.addOptions()}}).init(),{getWidthWindow:function(){i(window).resize(function(){var o=e();r.correctPosition=t.children("li").width(),o<=500?(r.radius=150,r.radiusSubItem=130,t.children("li").each(function(){var t=i(this).attr("data-angle"),e=a(t=parseInt(t));i(this).css({left:e.left-r.correctPosition/2+"px",top:e.top-r.correctPosition/2+"px"},n.duration)}),t.find("ul").children("li").each(function(){var t=i(this).attr("data-angle"),e=s(t=parseInt(t));i(this).css({left:e.left-r.subCorrectPosition/2+"px",top:e.top-r.subCorrectPosition/2+"px"},n.duration)})):(r.radius=200,r.radiusSubItem=150,t.children("li").each(function(){var t=i(this).attr("data-angle"),e=a(t=parseInt(t));i(this).css({left:e.left-r.correctPosition/2+"px",top:e.top-r.correctPosition/2+"px"},n.duration)}),t.find("ul").children("li").each(function(){var t=i(this).attr("data-angle"),e=s(t=parseInt(t));i(this).css({left:e.left-r.subCorrectPosition/2+"px",top:e.top-r.subCorrectPosition/2+"px"},n.duration)}))})},runNext:function(){i(".nextSpace").on("click",function(){if(!0===r.keyMotion){r.keyMotion=!1;var t=i(this).parent().parent().children("li").length;i(this).parent().parent().children("li").each(function(){var n=i(this).attr("data-angle");++n>t&&(n=1),i(this).attr("data-angle",n);var e=i(this).attr("data-angle");i(this).parent().hasClass("mx-sub_navigation")?o(n,i(this),e,!0):o(n,i(this),e)})}})},runPrev:function(){i(".prevSpace").on("click",function(){if(!0===r.keyMotion){r.keyMotion=!1;var t=i(this).parent().parent().children("li").length;i(this).parent().parent().children("li").each(function(){var n=i(this).attr("data-angle");--n<1&&(n=t),i(this).attr("data-angle",n);var e=i(this).attr("data-angle");i(this).parent().hasClass("mx-sub_navigation")?u(n,i(this),e,!0):u(n,i(this),e)})}})},openSubMenu:function(){i(".mx-is_sub_menu_link").on("click",function(){i(this).next("ul").hasClass("mx-sub_navigation_visible")?(i(this).next("ul").removeClass("mx-sub_navigation_visible"),i(this).next("ul").find("ul").removeClass("mx-sub_navigation_visible")):(i(this).parent().parent().find("li").find("ul").removeClass("mx-sub_navigation_visible"),i(this).next("ul").addClass("mx-sub_navigation_visible"))})},closedAllSubMenuClickOutside:function(){i(window).on("click",function(i){l(t,i)})},openMenu:function(){i("#mxOpenMenu").on("click",function(){i(".mx-navigation_wrap").animate({top:"0px"},n.downMenuSpeed),i("ul.mx-navigation").animate({top:"50%"},1.2*n.downMenuSpeed),i("#mxOpenMenu").css("top","-100px")})},closeMenu:function(){i(".mx-close").on("click",function(){i(".mx-navigation_wrap").animate({top:"-2000px"},2*n.downMenuSpeed),i("ul.mx-navigation").animate({top:"-2000px"},1.5*n.downMenuSpeed),i("#mxOpenMenu").animate({top:"50px"},n.downMenuSpeed/2)})},collapseMenu:function(){i(".mx-close").animate({opacity:0},n.collapseMenuSpeed),i(".mx-navigation").animate({top:-2e3},n.collapseMenuSpeed/1.5),i(".mx-back_circle1").animate({top:-1500},1.5*n.collapseMenuSpeed),i(".mx-back_circle2").animate({top:-1e3},1.5*n.collapseMenuSpeed),i(".mx-sub_navigation .mx-sub_navigation").animate({top:-1e3},1.9*n.collapseMenuSpeed),i(".mx-sub_navigation").animate({top:-1e3},1.5*n.collapseMenuSpeed)},linkLocation:function(){var e=this;!0===n.collapseMenu&&t.find("a").on("click",function(t){if(!i(this).hasClass("mx-is_sub_menu_link")){var a=i(this).attr("href");e.collapseMenu(),setTimeout(function(){window.location.href=a},n.collapseMenuSpeed)}t.preventDefault()})},run:function(){this.getWidthWindow(),this.runNext(),this.runPrev(),this.openSubMenu(),this.closedAllSubMenuClickOutside(),this.openMenu(),this.closeMenu(),this.linkLocation()}}.run()}i.defaultSett={visibleElementsMainMenu:6,visibleElementsSubMenu:4,duration:200,circleFromBehind:!0,menuFixed:!1,livingElements:!0,liveItemsHover:!0,downMenuSpeed:600,collapseMenu:!0,collapseMenuSpeed:2e3},i.fn.spaceMenu=function(n){t(this,i.extend({},i.defaultSett,n))}}(jQuery);